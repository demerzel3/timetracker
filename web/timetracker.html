<!DOCTYPE html>

<html ng-app>
<head>
<meta charset="utf-8">
<title>TimeTracker</title>
<link rel="stylesheet" href="packages/bootjack/css/bootstrap.min.css">
</head>
<body>
  <div class="container">

    <h1>TimeTracker</h1>

    <div class="row" index-controller>

      <div class="col-md-3">
        <h2>Progetti</h2>
  
        <div class="list-group projects-list">
          <a ng-repeat="project in ctrl.projects" 
             ng-class="{'active': ctrl.selectedProject == project}" 
             ng-click="ctrl.selectProject(project)" class="list-group-item">{{project.name}}</a>
          <a class="list-group-item">
            <input id="newProjectInput" type="text" ng-model="ctrl.newProjectName" placeholder="Nuovo Progetto" />
            <button ng-if="ctrl.newProjectName.length > 0" type="button" class="btn btn-default" ng-click="ctrl.createNewProject()"> <i class="glyphicon glyphicon-plus"></i> Aggiungi</button>
          </a>
        </div>
      </div>
      
      <div class="col-md-3" ng-if="ctrl.selectedProject != null">
        <h2>Task</h2>
        <div class="list-group tasks-list">
          <a ng-repeat="task in ctrl.selectedProject.tasks" 
             ng-class="{'active': ctrl.selectedTask == task}" 
             ng-click="ctrl.selectTask(task)" class="list-group-item"><strong>{{$index+1}})</strong> {{task.name}}</a>
          <a class="list-group-item">
            <input id="newTaskInput" type="text" ng-model="ctrl.newTaskName" placeholder="Nuovo Task" />
            <button ng-if="ctrl.newTaskName.length > 0" type="submit" class="btn btn-default" ng-click="ctrl.createNewTask()"> <i class="glyphicon glyphicon-plus"></i> Aggiungi</button>
          </a>
        </div>
      </div>

      <div class="col-md-6" ng-if="ctrl.selectedTask != null">
        <h2>Ore</h2>
        <table class="table table-striped">
          <thead>
            <tr>
              <th>Data</th>
              <th>Persona</th>
              <th>Durata (h)</th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="timing in ctrl.selectedTask.timings">
              <td>{{timing.date|date:'dd/MM/yyyy'}}</td>
              <td>{{timing.user}}</td>
              <td>{{timing.durationString}}</td>
            </tr>
            
            <tr>
              <td colspan="3">
                <form role="form" class="form-inline">
                  <div class="form-group">
                    <input type="date" class="form-control" id="dateBox" size="10" 
                      ng-model="ctrl.newTiming.date">  
                  </div>
                  <div class="form-group">
                    <select id="userBox" class="form-control" ng-model="ctrl.newTiming.user">
                      <option disabled selected value="">Scegli...</option>
                      <option value="davide">Davide</option>
                      <option value="elisa">Elisa</option>
                      <option value="gabriele">Gabriele</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <input type="text" id="durationBox" class="form-control" ng-model="ctrl.newTiming.durationString" placeholder="HH:MM" size="5">
                  </div>
                  <div class="form-group">
                    <button type="button" ng-click="ctrl.createNewTiming()" class="btn btn-default"><i class="glyphicon glyphicon-plus"></i> Aggiungi</button>
                  </div>          
                </form>        
              </td>
            </tr>
            
          </tbody>
        </table>   
        {{ctrl.newTiming.date}}     
      </div>

    </div>

  </div>

  <script type="application/dart" src="timetracker.dart"></script>
  <script src="packages/browser/dart.js"></script>
</body>
</html>
